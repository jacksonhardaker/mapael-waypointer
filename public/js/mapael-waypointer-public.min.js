var mapaelWaypointer=function(t){"use strict";function a(t,a){switch(m.waypointIndex++,t){case"plot":e(a.data("waypoint-name"));break;case"link":o(a.data("waypoint-to"),a.data("waypoint-from"))}}function i(a,i){switch(m.waypointIndex--,a){case"plot":n(i.data("waypoint-name"));break;case"link":r(i.data("waypoint-to"),i.data("waypoint-from"))}m.waypointIndex===-1&&m.args.zoom&&t(".mw__map-container").trigger("zoom",{level:"0"})}function e(a){a=a.trim();var i={};i[a]=m.cities[a],i[a].tooltip={content:i[a].city},t(".mw__map-container").trigger("update",{newPlots:i,animDuration:300}),m.args.zoom&&t(".mw__map-container").trigger("zoom",{level:"5",latitude:i[a].latitude,longitude:i[a].longitude})}function n(a){a=a.trim(),t(".mw__map-container").trigger("update",{deletePlotKeys:[a],animDuration:300})}function o(a,i){var e={};e[[i,a].join("")]={factor:c(),between:[i,a]},t(".mw__map-container").trigger("update",{newLinks:e,animDuration:300}),m.args.zoom&&t(".mw__map-container").trigger("zoom",{level:"2",latitude:m.cities[a].latitude,longitude:m.cities[a].longitude})}function r(a,i){t(".mw__map-container").trigger("update",{deleteLinkKeys:[[i,a].join("")],animDuration:300}),m.args.zoom&&t(".mw__map-container").trigger("zoom",{level:"2",latitude:m.cities[i].latitude,longitude:m.cities[i].longitude})}function c(){var t=(Math.floor(19*Math.random()+9)-18)/10;switch(t=t>=0&&t<.3?t+.3:t,t=t<0&&t>-.3?t-.3:t,l){case"under":t<0&&(t*=-1),l="over";break;case"over":t>0&&(t*=-1),l="under"}return t}var m={zoomSpeed:600,waypointIndex:-1};t(window).on("load",function(){if(t(".mw__map-container")[0]){console.log("Initialising Mapel Waypointer"),m.args=t('[data-side="mw-map-front"]').data("params"),m.args.cities=m.args.cities?m.args.cities.split(","):{},m.args.zoom="true"===m.args.zoom;var e={world:"world_countries",worldmercator:"world_countries_mercator",worldmiller:"world_countries_miller",srilanka:"sri_lanka",croatia:"croatia",japan:"japan",thailand:"thailand"};t(".mw__map-container").appendTo(".site-container"),t.getJSON("/wp-content/plugins/mapael-waypointer/public/js/mw-cities.min.json").done(function(a){m.cities=a;var i=m.args.cities.map?m.args.cities.map(function(t){t=t.trim();var a=m.cities[t];return a.key=t,a}).reduce(function(t,a){return a&&(a.tooltip={content:a.city},a.text={content:a.city},a.latitude=a.latitude?a.latitude:a.lat,a.longitude=a.longitude?a.longitude:a.lng,t[a.key.toLowerCase()]=a),t},{}):{};t(".mw__map-container").mapael({map:{name:e[m.args.map],cssClass:"mw__map-container__svg",defaultPlot:{size:4}},plots:i,links:{},zoom:{animEasing:"ease-in",animDuration:m.zoomSpeed}}),t(".mw__map-container").find("svg").height(t(window).height())});t(".mw__waypoint").waypoint({handler:function(e){var n=t(this.element);switch(e){case"down":a(n.data("waypoint-type"),n);break;case"up":i(n.data("waypoint-type"),n)}}})}});var l="under"}(jQuery);