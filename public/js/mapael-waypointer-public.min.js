var mapaelWaypointer=function(a){"use strict";function t(a,t){switch(m.waypointIndex++,a){case"plot":i(t.data("waypoint-name"));break;case"link":o(t.data("waypoint-to"),t.data("waypoint-from"))}}function e(t,e){switch(m.waypointIndex--,t){case"plot":n(e.data("waypoint-name"));break;case"link":r(e.data("waypoint-to"),e.data("waypoint-from"))}m.waypointIndex===-1&&m.args.zoom&&a(".mw__map-container").trigger("zoom",{level:"0"})}function i(t){t=t.trim();var e={};e[t]=m.cities[t],e[t].tooltip={content:e[t].city},a(".mw__map-container").trigger("update",{newPlots:e,animDuration:300}),m.args.zoom&&a(".mw__map-container").trigger("zoom",{level:"5",latitude:e[t].latitude,longitude:e[t].longitude})}function n(t){t=t.trim(),a(".mw__map-container").trigger("update",{deletePlotKeys:[t],animDuration:300})}function o(t,e){var i={};i[[e,t].join("")]={factor:c(),between:[e,t]},a(".mw__map-container").trigger("update",{newLinks:i,animDuration:300}),m.args.zoom&&a(".mw__map-container").trigger("zoom",{level:"2",latitude:m.cities[t].latitude,longitude:m.cities[t].longitude})}function r(t,e){a(".mw__map-container").trigger("update",{deleteLinkKeys:[[e,t].join("")],animDuration:300}),m.args.zoom&&a(".mw__map-container").trigger("zoom",{level:"2",latitude:m.cities[e].latitude,longitude:m.cities[e].longitude})}function c(){var a=(Math.floor(19*Math.random()+9)-18)/10;switch(a=a>=0&&a<.3?a+.3:a,a=a<0&&a>-.3?a-.3:a,s){case"under":a<0&&(a*=-1),s="over";break;case"over":a>0&&(a*=-1),s="under"}return a}var m={zoomSpeed:600,waypointIndex:-1};a(window).on("load",function(){if(a(".mw__map-container")[0]){console.log("Initialising Mapel Waypointer"),m.args=a('[data-side="mw-map-front"]').data("params"),m.args.cities=m.args.cities?m.args.cities.split(","):{},m.args.zoom="true"===m.args.zoom;var i={worldmercator:"world_countries_mercator",srilanka:"sri_lanka",newzealand:"new_zealand",croatia:"croatia",japan:"japan",thailand:"thailand",morocco:"morocco"};a(".mw__map-container").appendTo(".site-container"),a.getJSON("/wp-content/plugins/mapael-waypointer/public/js/mw-cities.min.json").done(function(t){m.cities=t;var e=m.args.cities.map?m.args.cities.map(function(a){a=a.trim();var t=m.cities[a];return t.key=a,t}).reduce(function(a,t){return t&&(t.tooltip={content:t.city},t.text={content:t.city},t.latitude=t.latitude?t.latitude:t.lat,t.longitude=t.longitude?t.longitude:t.lng,a[t.key.toLowerCase()]=t),a},{}):{};a(".mw__map-container").mapael({map:{name:i[m.args.map],cssClass:"mw__map-container__svg",defaultPlot:{size:4}},plots:e,links:{},zoom:{animEasing:"ease-in",animDuration:m.zoomSpeed}}),a(".mw__map-container").find("svg").height(a(window).height())});a(".mw__waypoint").waypoint({handler:function(i){var n=a(this.element);switch(i){case"down":t(n.data("waypoint-type"),n);break;case"up":e(n.data("waypoint-type"),n)}}})}});var s="under"}(jQuery);