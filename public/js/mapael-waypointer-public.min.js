var mapaelWaypointer=function(t){"use strict";function a(t,a){switch(c.waypointIndex++,t){case"plot":i(a.data("waypoint-name"));break;case"link":o(a.data("waypoint-to"),a.data("waypoint-from"))}}function e(a,e){switch(c.waypointIndex--,a){case"plot":n(e.data("waypoint-name"));break;case"link":r(e.data("waypoint-to"),e.data("waypoint-from"))}c.waypointIndex===-1&&c.args.zoom&&t(".mw__map-container").trigger("zoom",{level:"0"})}function i(a){a=a.trim();var e={};e[a]=c.cities[a],e[a].tooltip={content:e[a].city},t(".mw__map-container").trigger("update",{newPlots:e,animDuration:300}),c.args.zoom&&t(".mw__map-container").trigger("zoom",{level:"5",latitude:e[a].latitude,longitude:e[a].longitude})}function n(a){a=a.trim(),t(".mw__map-container").trigger("update",{deletePlotKeys:[a],animDuration:300})}function o(a,e){var i={};i[[e,a].join("")]={factor:s(),between:[e,a]},t(".mw__map-container").trigger("update",{newLinks:i,animDuration:300}),c.args.zoom&&t(".mw__map-container").trigger("zoom",{level:"2",latitude:c.cities[a].latitude,longitude:c.cities[a].longitude})}function r(a,e){t(".mw__map-container").trigger("update",{deleteLinkKeys:[[e,a].join("")],animDuration:300}),c.args.zoom&&t(".mw__map-container").trigger("zoom",{level:"2",latitude:c.cities[e].latitude,longitude:c.cities[e].longitude})}function s(){var t=(Math.floor(19*Math.random()+9)-18)/10;switch(t=t>=0&&t<.3?t+.3:t,t=t<0&&t>-.3?t-.3:t,m){case"under":t<0&&(t*=-1),m="over";break;case"over":t>0&&(t*=-1),m="under"}return t}var c={zoomSpeed:600,waypointIndex:-1};t(window).on("load",function(){if(t(".mw__map-container")[0]){console.log("Initialising Mapel Waypointer"),c.args=t('[data-side="mw-map-front"]').data("params"),c.args.cities=c.args.cities?c.args.cities.split(","):{},c.args.zoom="true"===c.args.zoom;var i={world:"world_countries",worldmercator:"world_countries_mercator",worldmiller:"world_countries_miller",srilanka:"sri_lanka"};t(".mw__map-container").appendTo(".site-container"),t.getJSON("/wp-content/plugins/mapael-waypointer/public/js/mw-cities.min.json").done(function(a){c.cities=a,console.log(c.cities);var e=c.args.cities.map?c.args.cities.map(function(t){t=t.trim();var a=c.cities[t];return a.key=t,a}).reduce(function(t,a){return a&&(a.tooltip={content:a.city},a.text={content:a.city},a.latitude=a.latitude?a.latitude:a.lat,a.longitude=a.longitude?a.longitude:a.lng,t[a.key.toLowerCase()]=a),t},{}):{};t(".mw__map-container").mapael({map:{name:i[c.args.map],cssClass:"mw__map-container__svg",defaultPlot:{size:4}},plots:e,links:{},zoom:{animEasing:"ease-in",animDuration:c.zoomSpeed}}),t(".mw__map-container").find("svg").height(t(window).height())});t(".mw__waypoint").waypoint({handler:function(i){var n=t(this.element);switch(i){case"down":a(n.data("waypoint-type"),n);break;case"up":e(n.data("waypoint-type"),n)}}})}});var m="under"}(jQuery);